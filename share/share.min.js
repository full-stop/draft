/**
 * @Author: gtShen
 * @Date:   2017-09-03T16:57:22+08:00
 * @Email:  sgt_ah@163.com
 * @Filename: share.min.js
 * @Last modified by:   gtShen
 * @Last modified time: 2017-09-03T16:58:35+08:00
 */

!function(e){"use strict";function t(e){this.params=e,this.dom=e.dom,this.type=e.type||["weibo","qqweibo","qq","qqzone","wx","rr","bdtb","db","qqpy","kx"],this.config={weibo:["新浪微博","http://service.weibo.com/share/share.php?"],qqweibo:["腾讯微博","http://share.v.t.qq.com/index.php?c=share&a=index"],qq:["QQ好友","http://connect.qq.com/widget/shareqq/index.html?"],qqzone:["QQ空间","http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?"],wx:["微信分享",""],rr:["人人分享","http://widget.renren.com/dialog/share?"],bdtb:["百度贴吧","http://tieba.baidu.com/f/commit/share/openShareApi?"],db:["豆瓣","http://shuo.douban.com/!service/share?"],qqpy:["朋友网","http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?to=pengyou&"],kx:["开心网","http://www.kaixin001.com/login/open_login.php?"]},this.type&&this.type.length?this.defa():this.custom()}t.prototype.custom=function(){for(var e="",t=0,s=this.type.length;t<s;t++)e+='<a href="javascript:;" class="custom-share-'+this.type[t]+'" share-type="'+this.type[t]+'">'+this.config[this.type[t]][0]+"</a>";this.dom.innerHTML=e,this.bind()},t.prototype.defa=function(){for(var e="",t=0,s=this.type.length;t<s;t++)e+='<a href="javascript:;" class="defautl-share-'+this.type[t]+'" share-type="'+this.type[t]+'">'+this.config[this.type[t]][0]+"</a>";this.dom.innerHTML=e,this.bind()},t.prototype.bind=function(){var e=this;this.dom.onclick=function(t){var s=t||window.event,i=s.target||s.srcElement;"A"===i.nodeName&&e.core(i)}},t.prototype.core=function(e){var t=this,s=e.getAttribute("share-type")||"weibo",i=this.config[s][1],a=encodeURIComponent(this.params[s]&&this.params[s].url?this.params[s].url:this.params.url),r=encodeURIComponent(this.params[s]&&this.params[s].title?this.params[s].title:this.params.title?this.params.title:""),o=encodeURIComponent(this.params[s]&&this.params[s].images?this.params[s].images:this.params.images?this.params.images:""),n=encodeURIComponent(this.params[s]&&this.params[s].desc?this.params[s].desc:this.params.desc?this.params.desc:""),p=encodeURIComponent(this.params[s]&&this.params[s].summary?this.params[s].summary:this.params.summary?this.params.summary:""),h=encodeURIComponent(this.params[s]&&this.params[s].site?this.params[s].site:"");if("wx"!=s){switch(s){case"weibo":i+="title="+r+"&url="+a+"&pic="+o;break;case"qqweibo":i+="&title="+r+"&url="+a+"&pic="+o;break;case"qq":case"qqzone":i+="url="+a+"&title="+r+"&desc="+n+"&summary="+p+"&pics="+o+"&site="+h;break;case"rr":i+="resourceUrl="+a+"&title="+r+"&description="+n+"&pic="+o;break;case"bdtb":i+="title="+r+"&url="+a+"&pic="+o+"&desc="+n;break;case"db":i+="image="+o+"&href="+a+"&name="+r+"&text="+n;break;case"qqpy":i+="pics="+o+"&url="+a+"&title="+r+"&desc="+n+"&summary="+p;break;case"kx":i+="&url="+a+"&rtitle="+r}window.open(i,"_blank","width=800px,height=500px,top="+(screen.height-500)/2+",left="+(screen.width-800)/2+",toolbar=no,menubar=no,scrollbars=no,resizable=1,location=no,status=0")}else!function(){var e=document.getElementById("share-qrcode-box")||!1,s=document.getElementById("share-wx-qrcode-img")||null,i=new Image,a=0,r=0,o=null;if("blank"!=t.params.target&&s)return void s.parentNode.removeChild(s);e||("blank"==t.params.target?(i.onload=function(){a=this.width,r=this.height,o=document.createElement("div"),o.className="share-qrcode",o.id="share-qrcode-box",o.innerHTML='<img src="'+t.params.qrcode+'" /><span href="javascript:;" class="share-close">&#10005;</span>',o.style.cssText="padding:5px;position:fixed;_position:absolute;left:50%;top:50%;margin-left:"+-(a+20)/2+"px;margin-top:"+-(r+20)/2+"px;",document.body.appendChild(o),o.children[1].style.cssText="position:absolute;cursor:pointer;right:-20px;top:-15px;",o.children[1].onclick=function(){var e=document.getElementById("share-qrcode-box");document.body.removeChild(e)}},i.src=t.params.qrcode):(i.src=t.params.qrcode,i.id="share-wx-qrcode-img",t.dom.style.cssText="position:relative",t.dom.appendChild(i)))}()},void 0!=typeof module&&"object"==typeof exports?module.exports=t:"undefined"!=typeof define&&define.amd?define(function(){return t}):"function"==typeof $?$.fn.share=t:e.share=t}(this);
