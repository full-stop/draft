!function(e,o){function n(e,o){function n(i){i.target===this&&o&&o(),e.removeEventListener(t,n,!1)}var t,i=["a","webkitA","MozA","OA","msA"],l=["animationend","webkitAnimationEnd","animationend","oAnimationEnd","MSAnimationEnd"],s=document.createElement("div").style;if("onanimationend"in window)t="animationend";else if("onwebkitanimationend"in window)t="webkitAnimationEnd";else for(var a=0,r=i.length;a<r;a++)if(f=i[a]+"nimation",f in s){t=l[a];break}t&&e?e.addEventListener(t,n,!1):o&&o()}function t(e){var o=e.dom,t=e.$mask,i=o.is(".pop-mobile-layout");e.hideClass?(o.removeClass(e.showClass).addClass(e.hideClass),n(o[0],function(){o.removeAttr("style").removeClass("pop-mobile-container").removeClass(e.hideClass),t.remove(),e.callback&&e.callback(e),i&&o.remove(),e=o=t=null})):(o.removeAttr("style").removeClass("pop-mobile-container"),t.remove(),e.callback&&e.callback(e),i&&o.remove(),e=o=t=i=null)}function i(){var e=o(".pop-mobile-container"),n=o(".pop-mobile-layout"),t=o(".mask");e.removeAttr("style").removeClass(a.showClass).removeClass("pop-mobile-container"),t.remove(),n.remove(),e=t=n=null}function l(e){var n=o('<div class="mask"></div>'),l=o(".pop-mobile-container").length,r=e.dom||a.dom,m=e.close?e.close:a.close,d=e.zIndex||a.zIndex,c=e.mutex||a.mutex,f=e.before||a.before,p=e.after||a.after,u=e.width||0,b=e.height||0,v=e.showClass||"",h=function(o,i){e.$mask=n,f&&f(e),o.css({position:"fixed",left:0,top:0,right:0,bottom:0,margin:"auto",zIndex:d+l}),n.css({position:"fixed",left:0,top:0,right:0,bottom:0,width:"100%",height:"100%",background:"rgba(0,0,0,.5)",zIndex:d+l}),v&&(-1==a.showClass.indexOf(v)&&(a.showClass+=v),o.addClass(v)),i&&(o.css({width:u+"rem",height:b+"rem"}),o.html(i),o.children().first().show(),s.append(o),e.dom=o),o.off("touchmove").on("touchmove",function(e){e.preventDefault()}),o.find(m).off("tap").on("tap",function(o){t(e)})};if(c&&i(e),r&&"string"==typeof r){var w=o('<div class="pop-mobile-container pop-mobile-layout hide"></div>');h(w,r),w.before(n).show()}r&&"object"==typeof r&&(r.is(".pop-mobile-container")||(h(r),r.before(n).addClass("pop-mobile-container").show())),p&&p(e),this.close=function(){t(e)}}var s=o("body"),a={dom:"",close:".pop-close",zIndex:100,mutex:0,showClass:"",before:null,after:null,callback:null};"undefined"!=typeof module&&"object"==typeof exports?(exports.open=function(e){return new l(e)},exports.closeAll=i):"undefined"!=typeof define&&define.amd?define(["jquery"],function(e,o,n){o.open=function(e){return new l(e)},o.closeAll=i}):"function"==typeof o&&(o.popMobile=function(e){return new l(e)},o.popMobileCloseAll=i)}(0,jQuery);